<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sete Educa - Acessar TURMAS</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* Define vari√°veis CSS para reutiliza√ß√£o, como a largura da barra lateral */
        :root {
            --sidebar-width: 280px;
        }

        /* Seletor universal (*) que remove todas as margens e preenchimentos padr√£o e define uma fonte padr√£o para toda a p√°gina */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        /* Estilos para o corpo (body) da p√°gina */
        body {
            background-color: #fcf8f2;
            /* Cor de fundo suave */
            min-height: 100vh;
            /* Altura m√≠nima de 100% da tela */
            display: flex;
            /* Usa o modelo Flexbox para alinhar os elementos filhos (sidebar e conte√∫do principal) lado a lado */
        }

        /* --- CSS da Barra Lateral (Sidebar) --- */
        .sidebar {
            width: var(--sidebar-width);
            /* Largura definida pela vari√°vel CSS */
            background: linear-gradient(180deg, #FFF4DF 0%, #f8f0e3 100%);
            /* Fundo com um gradiente suave */
            display: flex;
            /* Habilita o Flexbox para os itens internos */
            flex-direction: column;
            /* Organiza os itens em coluna (logo/menu em cima, footer embaixo) */
            justify-content: space-between;
            /* Distribui o espa√ßo entre os itens */
            box-shadow: 2px 0 15px rgba(0, 0, 0, 0.1);
            /* Sombra sutil para dar profundidade */
            min-height: 100vh;
            /* Altura m√≠nima de 100% da tela */
            flex-shrink: 0;
            /* Impede que a sidebar encolha se o conte√∫do for muito grande */
            position: fixed;
            /* Fixa a sidebar na tela, para que n√£o role com a p√°gina */
            left: 0;
            top: 0;
            z-index: 1000;
            /* Posicionamento e ordem de sobreposi√ß√£o */
        }

        .logo {
            padding: 0px 40px;
            text-align: center;
            margin-bottom: 25px;
            margin-top: 30px;
        }

        .logo img {
            max-width: 150px;
        }

        .menu {
            flex: 1;
            /* Permite que o menu ocupe todo o espa√ßo vertical dispon√≠vel */
            padding: 20px 18px;
            overflow-y: auto;
            /* Adiciona uma barra de rolagem se o menu for muito grande */
        }

        /* Estilos para cada item do menu */
        .menu-item {
            padding: 30px 20px;
            margin-bottom: 6px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            /* Anima√ß√£o suave para todas as propriedades */
            position: relative;
            /* Necess√°rio para o pseudo-elemento ::after */
            display: flex;
            align-items: center;
            /* Alinha o √≠cone e o texto verticalmente */
            font-weight: 500;
            color: black;
            text-decoration: none;
            /* Remove o sublinhado do link */
            overflow: visible;
        }

        .menu-item i {
            margin-right: 15px;
            font-size: 18px;
            width: 24px;
            text-align: center;
            z-index: 2;
        }

        .menu-item span {
            z-index: 2;
            font-size: 15px;
        }

        /* Efeito ao passar o mouse sobre o item do menu */
        .menu-item:hover {
            background-color: #6c757d21;
        }

        /* Estilo para o item de menu que est√° ativo (p√°gina atual) */
        .menu-item.active {
            background-color: rgba(128, 128, 128, 0.356);
            color: #333;
            font-weight: 600;
        }

        /* Adiciona indicador visual no item ativo */
        .menu-item.active::before {
            content: '';
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: currentColor;
            z-index: 2;
        }

        /* Cria uma pequena linha decorativa abaixo do item do menu */
        .menu-item::after {
            padding: 0 10px;
            content: '';
            position: absolute;
            bottom: -3px;
            left: 20px;
            height: 2px;
            width: 0px;
            /* Come√ßa com largura 0 */
            transition: width 0.3s ease;
            /* Anima a largura */
            border-radius: 1px;
        }

        /* Expande a linha quando o mouse passa por cima ou se o item est√° ativo */
        .menu-item:hover::after,
        .menu-item.active::after {
            width: calc(100% - 40px);
        }

        /* Cores diferentes da linha para cada item do menu */
        .menu-item:nth-child(1)::after {
            background-color: #F4BF27;
        }

        .menu-item:nth-child(2)::after {
            background-color: #306bc2;
        }

        .menu-item:nth-child(3)::after {
            background-color: #9747FF;
        }

        .menu-item:nth-child(4)::after {
            background-color: #F88C12;
        }

        .menu-item:nth-child(5)::after {
            background-color: #D22A2A;
        }

        .menu-item:nth-child(6)::after {
            background-color: #59C631;
        }

        /* Estilos do rodap√© da sidebar */
        .sidebar-footer {
            padding: 20px 18px;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }

        /* Estilo do bot√£o de Sair */
        .logout-button {
            padding: 16px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            font-weight: 500;
            color: #333;
            width: 100%;
            text-decoration: none;
            background: transparent;
            border: none;
        }

        .logout-button i {
            margin-right: 15px;
            font-size: 18px;
            width: 24px;
            text-align: center;
        }

        .logout-button:hover {
            background-color: rgba(210, 42, 42, 0.1);
            color: #D22A2A;
            font-weight: 600;
        }

        /* --- CSS do Conte√∫do Principal --- */
        .main-content {
            flex: 1;
            /* Faz o conte√∫do principal ocupar todo o espa√ßo restante */
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            /* Organiza o cabe√ßalho e a √°rea de conte√∫do em coluna */
            margin-left: var(--sidebar-width);
            /* Cria um espa√ßo √† esquerda para n√£o ficar embaixo da sidebar */
        }

        .header {
            background: #c01e26;
            /* Cor de fundo do cabe√ßalho */
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            /* Alinha o t√≠tulo √† esquerda e o perfil √† direita */
            padding: 0 30px;
            color: white;
            width: 100%;
        }

        .header-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.5rem;
            color: white;
            font-family: 'Kodchasan', sans-serif;
        }

        .header-title i {
            margin-right: 15px;
            font-size: 28px;
        }

        /* Estilos do menu de perfil (dropdown) */
        .profile {
            position: relative;
            cursor: pointer;
            z-index: 10;
        }

        .profile-header {
            display: flex;
            align-items: center;
            padding: 5px;
            border-radius: 50px;
            transition: background-color 0.2s ease;
        }

        .profile-header:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .profile-icon {
            font-size: 38px;
            color: white;
        }

        .profile-arrow {
            font-size: 14px;
            margin-left: 8px;
            color: white;
            transition: transform 0.3s ease;
        }

        /* O menu dropdown come√ßa escondido */
        .profile-dropdown {
            display: none;
            position: absolute;
            top: 110%;
            right: 0;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            width: 200px;
            z-index: 1001;
            overflow: hidden;
            padding: 8px 0;
            border: 1px solid #eee;
        }

        /* A classe 'show' (adicionada via JS) torna o menu vis√≠vel */
        .profile-dropdown.show {
            display: block;
        }

        .profile-dropdown a {
            display: flex;
            align-items: center;
            padding: 12px 18px;
            text-decoration: none;
            color: #444;
            font-size: 15px;
            transition: background-color 0.2s ease;
        }

        .profile-dropdown a:hover {
            background-color: #f5f5f5;
        }

        .profile-dropdown a i {
            width: 20px;
            margin-right: 15px;
            color: #666;
            text-align: center;
        }

        /* --- Estilos espec√≠ficos da √Årea de Conte√∫do desta p√°gina --- */
        .content-area {
            padding: 30px;
            background: #fcf8f2;
            flex: 1;
            width: 100%;
        }

        .search-section {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 30px;
        }

        /* Barra de pesquisa */
        .search-container {
            position: relative;
            width: 400px;
        }

        .search-input {
            width: 100%;
            height: 50px;
            background: white;
            border: 2px solid #ddd;
            border-radius: 25px;
            padding: 0 20px 0 50px;
            font-size: 16px;
            color: #666;
            outline: none;
        }

        .search-input:focus {
            border-color: #c01e26;
            box-shadow: 0 0 0 3px rgba(193, 39, 45, 0.1);
        }

        /* √çcone de lupa dentro da barra de pesquisa */
        .search-icon {
            position: absolute;
            left: 18px;
            top: 50%;
            transform: translateY(-50%);
            color: #999;
            font-size: 18px;
        }

        /* Bot√£o para adicionar nova turma */
        .new-button {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .new-button:hover {
            transform: translateY(-2px);
            /* Efeito de "levantar" ao passar o mouse */
        }

        .new-button-circle {
            width: 45px;
            height: 45px;
            background: #c01e26;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 28px;
            font-weight: 200;
            position: relative;
            transition: background-color 0.3s ease;
        }

        .new-button:hover .new-button-circle {
            background: #a01820;
        }

        .new-button-circle::before {
            content: '+';
            position: absolute;
            top: 50%;
            left: 50%;
            /* Centraliza o sinal de '+' */
            transform: translate(-50%, -50%);
            font-size: 28px;
        }

        .new-text {
            font-size: 14px;
            color: #666;
            font-weight: 500;
            text-align: center;
        }

        /* Contador do total de turmas */
        .stats-info {
            text-align: right;
            color: #333;
            font-size: 18px;
            font-weight: 600;
        }

        /* Container da tabela */
        .table-container {
            background: white;
            border-radius: 12px;
            border-top: 5px solid #c01e26;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            /* Garante que os cantos arredondados funcionem */
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            /* Remove o espa√ßamento entre as c√©lulas */
        }

        .table-header {
            background: #f8f9fa;
            color: #666;
            font-weight: 600;
            font-size: 14px;
            text-transform: uppercase;
        }

        .table th,
        .table td {
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid #eee;
        }

        /* Container para os bot√µes de a√ß√£o na tabela */
        .operations {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            min-width: 200px;
        }

        /* Estilo base para os bot√µes de a√ß√£o (Ver, Editar, Excluir) */
        .btn-action {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            padding: 10px 14px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        /* Estilos espec√≠ficos para cada bot√£o de a√ß√£o */
        .btn-view-students {
            background: #e8f5e8;
            color: #2e7d32;
            border: 2px solid #c8e6c9;
        }

        .btn-view-students:hover {
            background: #c8e6c9;
        }

        .btn-edit {
            background: #e3f2fd;
            color: #1976d2;
            border: 2px solid #bbdefb;
        }

        .btn-edit:hover {
            background: #bbdefb;
        }

        /* NOVO ESTILO PARA O BOT√ÉO EXCLUIR */
        .btn-delete {
            background: #fce4ec;
            color: #c01e26;
            border: 2px solid #f8bbd9;
        }

        .btn-delete:hover {
            background: #f8bbd9;
        }

        /* Estilos para o status das vagas */
        .vagas-status {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
        }

        .vagas-disponivel {
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
            color: #155724;
        }

        .vagas-poucas {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            color: #856404;
        }

        .vagas-esgotadas {
            background: linear-gradient(135deg, #f8d7da, #f5c6cb);
            color: #721c24;
        }


        /* --- Estilos para o Modal de Confirma√ß√£o (Novo) --- */
        .modal {
            display: none;
            /* Escondido por padr√£o */
            position: fixed;
            z-index: 10000;
            /* Alto para garantir que fique acima de tudo */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.6);
            /* Fundo escuro transparente */
            backdrop-filter: blur(3px);
            /* Efeito de desfoque sutil */
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: #fff;
            margin: 15% auto;
            /* Centraliza verticalmente */
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 450px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.3);
            text-align: center;
            position: relative;
            border-top: 8px solid #c01e26;
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-icon {
            font-size: 50px;
            color: #c01e26;
            margin-bottom: 15px;
        }

        .modal-content h3 {
            margin-bottom: 15px;
            color: #333;
            font-size: 1.5rem;
        }

        .modal-content p {
            font-size: 16px;
            color: #666;
            line-height: 1.5;
            margin-bottom: 25px;
            font-weight: 500;
        }

        .modal-content strong {
            color: #c01e26;
        }

        .modal-buttons {
            display: flex;
            justify-content: space-around;
            gap: 10px;
        }

        .modal-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 600;
            transition: all 0.2s ease;
            width: 48%;
        }

        .btn-cancel {
            background-color: #f0f0f0;
            color: #333;
        }

        .btn-cancel:hover {
            background-color: #e0e0e0;
        }

        .btn-confirm {
            background-color: #c01e26;
            color: white;
        }

        .btn-confirm:hover {
            background-color: #a01820;
        }

        /* ========================================
           RESPONSIVIDADE - MEDIA QUERIES
        ======================================== */

        /* Tablets e telas m√©dias */
        @media (max-width: 1024px) {
            .content-area {
                padding: 20px;
            }

            .search-container {
                width: 300px;
            }

            .header-title {
                font-size: 1.3rem;
            }

            .table th,
            .table td {
                padding: 15px 10px;
                font-size: 13px;
            }

            .btn-action {
                padding: 8px 10px;
                font-size: 12px;
            }

            .operations {
                min-width: 180px;
                flex-wrap: wrap;
            }
        }

        /* Tablets pequenos */
        @media (max-width: 768px) {
            :root {
                --sidebar-width: 70px;
            }

            /* Esconde textos da sidebar */
            .menu-item span,
            .logout-button span {
                display: none;
            }

            .menu-item i,
            .logout-button i {
                margin-right: 0;
            }

            .sidebar .logo {
                padding: 0 10px;
            }

            .sidebar .logo img {
                max-width: 50px;
            }

            .sidebar-footer {
                padding: 10px 5px;
            }

            .menu {
                padding: 10px 5px;
            }

            .menu-item {
                padding: 15px 5px;
                justify-content: center;
            }

            .menu-item::after {
                display: none;
            }

            .menu-item.active::before {
                right: 5px;
            }

            .main-content {
                margin-left: var(--sidebar-width);
                width: calc(100% - var(--sidebar-width));
            }

            /* Header responsivo */
            .header {
                padding: 0 15px;
                height: 70px;
            }

            .header-title {
                font-size: 1.1rem;
            }

            .header-title i {
                font-size: 22px;
                margin-right: 8px;
            }

            .profile-icon {
                font-size: 32px;
            }

            /* √Årea de conte√∫do */
            .content-area {
                padding: 15px;
            }

            .search-section {
                flex-direction: column;
                gap: 15px;
                align-items: stretch;
            }

            .search-container {
                width: 100%;
            }

            .stats-info {
                text-align: center;
                font-size: 16px;
            }

            /* Tabela responsiva - scroll horizontal */
            .table-container {
                overflow-x: auto;
            }

            .table {
                min-width: 700px;
            }

            .table th,
            .table td {
                padding: 12px 8px;
                font-size: 12px;
            }

            .operations {
                flex-direction: column;
                gap: 5px;
                min-width: 100px;
            }

            .btn-action {
                width: 100%;
                justify-content: center;
            }

            /* Modal responsivo */
            .modal-content {
                width: 95%;
                padding: 20px;
                margin: 20% auto;
            }

            .modal-content h3 {
                font-size: 1.2rem;
            }

            .modal-content p {
                font-size: 14px;
            }

            .modal-buttons {
                flex-direction: column;
                gap: 10px;
            }

            .modal-btn {
                width: 100%;
            }
        }

        /* Smartphones */
        @media (max-width: 480px) {
            .header {
                height: 60px;
            }

            .header-title {
                font-size: 1rem;
            }

            .header-title i {
                font-size: 18px;
                margin-right: 5px;
            }

            .profile-icon {
                font-size: 28px;
            }

            .content-area {
                padding: 10px;
            }

            .search-input {
                height: 45px;
                font-size: 14px;
            }

            .new-button-circle {
                width: 40px;
                height: 40px;
            }

            .new-text {
                font-size: 12px;
            }

            .stats-info {
                font-size: 14px;
            }

            .table th,
            .table td {
                padding: 10px 5px;
                font-size: 11px;
            }

            .vagas-status {
                font-size: 10px;
                padding: 4px 8px;
            }

            .btn-action {
                font-size: 11px;
                padding: 6px 8px;
            }

            .modal-content {
                padding: 15px;
            }

            .modal-icon {
                font-size: 40px;
            }

            .modal-content h3 {
                font-size: 1.1rem;
            }

            .modal-content p {
                font-size: 13px;
            }
        }

        /* Telas muito pequenas */
        @media (max-width: 360px) {
            :root {
                --sidebar-width: 60px;
            }

            .header-title span {
                font-size: 0.9rem;
            }

            .table {
                min-width: 600px;
            }
        }
    </style>
</head>

<body>

   <aside class="sidebar">
                <div>


            <div class="logo">


                <img src="logo.png" alt="logo">

        </div>

             <div class="menu">
                <a href="/home" class="menu-item" onclick="navegarPara('inicio')">


                    <i class="fas fa-home"></i>

                    <span>IN√çCIO</span>
                </a>

               <a href="/acessar-aluno" class="menu-item" onclick="navegarPara('cadastro')">
                    <i class="fas fa-address-card"></i>
                    <span>CADASTRO</span>
                </a>
                <a href="/matriculas"class="menu-item" onclick="navegarPara('matricula')">

               <i class="fas fa-user-graduate"></i>
                    <span>MATR√çCULA</span>
                </a>


                <a href="/professores" class="menu-item" onclick="navegarPara('professores')">


                    <i class="fas fa-chalkboard-teacher"></i>

              <span>PROFESSOR</span>
                </a>

                <a href="/turmas" class="menu-item active" onclick="navegarPara('turmas')">
                    <i class="fas fa-users"></i>
                    <span>TURMA</span>
          </a>


                <a href="/financeiro" class="menu-item" onclick="navegarPara('financeiro')">
                    <i class="fas fa-dollar-sign"></i>
                    <span>FINANCEIRO</span>
                </a>
</div>


        </div>


        <div class="sidebar-footer">


    <a href="/login/sair" class="logout-button" onclick="return confirm('Deseja realmente sair do sistema?')">


        <i class="fa-solid fa-right-from-bracket"></i>


        <span>Sair</span>
    </a>
</div>
        </aside>


    <div class="main-content">

        <div class="header">
            <div class="header-title">
                <i class="fas fa-users"></i>

                <span>Acessar <b>TURMAS</b></span>
            </div>
            <div class="profile" id="profile-toggle">

                <div class="profile-header">

                    <i class="fas fa-user-circle profile-icon"></i>
                    <i class="fas fa-chevron-down profile-arrow"></i>

                </div>
                <div class="profile-dropdown" id="profile-dropdown-menu">

                    <a href="/meuperfil"><i class="fas fa-user"></i> Meu perfil</a>

                    <a href="/mensalidade"><i class="fas fa-file-invoice-dollar"></i>
                        Mensalidade</a>

                    <a href="/arquivados"><i class="fas fa-archive"></i> Arquivados</a>
                </div>
            </div>

        </div>


        <div class="content-area">
            <div class="search-section">
                <div class="search-container">

                    <div class="search-icon"><i class="fas fa-search"></i></div>
                    <input type="text" class="search-input" placeholder="Pesquisar por nome da turma ou professor...">

                </div>
                <a href="/turmas/cadastro" class="new-button" style="text-decoration: none;">

                    <div class="new-button-circle"></div>
                    <div class="new-text">Nova turma</div>
                </a>


                <div class="stats-info" id="totalTurmas">Total de Turmas: <%= turmas.length %>
                </div>
            </div>

            <div class="table-container">
                <table class="table">
                    <thead class="table-header">


                        <tr>
                            <th>Nome da Turma</th>

                            <th>Professor(a)</th>
                            <th>Vagas</th>


                            <th>Alunos</th>

                            <th>Ano letivo</th>
                            <th>Opera√ß√µes</th>


                        </tr>
                    </thead>
                    <tbody id="turmasTableBody">

                        <% if (turmas && turmas.length> 0) { %>


                            <% turmas.forEach(turma=> { %>
                                <tr>

                                    <td style="font-weight: 600;">

                                        <%= turma.nome_turma %>

                                    </td>

                                    <td>

                                        <%= turma.professor ?
                                            turma.professor.nome
                                            : 'N√£o definido' %>

                                    </td>


                                    <td>

                                        <%
                                            const vagasRestantes = turma.limite_vagas - turma.quantidade_alunos;
                                        %>

                                        <% if (vagasRestantes <= 0) { %>
                                            <span class="vagas-status vagas-esgotadas">Esgotadas</span>
                                            <% } else if (vagasRestantes <= 2) { %>
                                                <span class="vagas-status vagas-poucas">
                                                    <%= vagasRestantes %> restantes
                                                </span>
                                                <% } else { %>
                                                    <span class="vagas-status vagas-disponivel">Dispon√≠veis</span>
                                                    <% } %>

                                    </td>
                                    <td><strong>

                                            <%= turma.quantidade_alunos %>

                                                / <%= turma.limite_vagas %>

                                        </strong></td>

                                    <td>

                                        <%= turma.ano_letivo %>
                                    </td>

                                    <td>


                                        <div class="operations">


                                            <a href="/turmas/ver/<%= turma.id %>"
                                                class="btn-action btn-view-students" title="Ver alunos da turma">

                                                <i class="fas fa-eye"></i> Ver

                                            </a>

                                            <a href="/turmas/editar/<%= turma.id %>" class="btn-action btn-edit"
                                                title="Editar turma">

                                                <i class="fas fa-edit"></i> Editar


                                            </a>

                                            <button type="button" class="btn-action btn-delete"
                                                title="Excluir turma (Definitivo)"
                                                onclick="openDeleteModal('<%= turma.id %>', '<%= turma.nome_turma %>')">
                                                <i class="fas fa-trash-alt"></i> Excluir
                                            </button>

                                        </div>

                                    </td>


                                </tr>
                                <% }) %>

                                    <% } else { %>

                                        <tr>

                                            <td colspan="6" style="text-align:center;
 color:#666; padding:40px;">
                                                Nenhuma turma cadastrada

                                                ainda.

                                            </td>

                                        </tr>

                                        <% } %>
                    </tbody>
                </table>

            </div>
        </div>
    </div>

    <div id="deleteModal" class="modal">
        <div class="modal-content">
            <div class="modal-icon"><i class="fas fa-exclamation-triangle"></i></div>
            <h3 id="modalTitle">Confirma√ß√£o de Exclus√£o</h3>
             <p>
                Voc√™ est√° prestes a **excluir** permanentemente a turma **<span id="turmaNomeModal"></span>**.
                <br><br>
                üö® **AVISO IMPORTANTE:** A exclus√£o √© **IRREVERS√çVEL** e s√≥ ser√° permitida se **N√ÉO houver NENHUM aluno
                    ativo** matriculado nesta turma.
            </p>
            <div class="modal-buttons">
                <button class="modal-btn btn-cancel" onclick="closeModal()">Cancelar</button>
                <button class="modal-btn btn-confirm" id="confirmDeleteBtn">Excluir Turma</button>
            </div>
        </div>
    </div>

    <script>

         // Fun√ß√£o para sair do sistema
        function logout() {
                        // Pede confirma√ß√£o ao usu√°rio antes de redirecionar
                        if (confirm('Deseja realmente sair do sistema?')) {
                                window.location.href = '/login/sair';
                        }
        }

        // Vari√°vel global para guardar o ID da turma a ser exclu√≠da
        let turmaIdToDelete = null;

        // Elementos do Modal
        const deleteModal = document.getElementById('deleteModal');
        const turmaNomeModal = document.getElementById('turmaNomeModal');
        const confirmDeleteBtn = document.getElementById('confirmDeleteBtn');

        // Fun√ß√£o para abrir o modal
        function openDeleteModal(id, nome) {
            turmaIdToDelete = id; // Guarda o ID
            turmaNomeModal.textContent = nome; // Exibe o nome da turma no modal
            deleteModal.style.display = 'flex'; // Torna o modal vis√≠vel
        }

        // Fun√ß√£o para fechar o modal
        function closeModal() {
            deleteModal.style.display = 'none';
            turmaIdToDelete = null; // Limpa o ID
        }

        // Fun√ß√£o que lida com a exclus√£o ap√≥s a confirma√ß√£o no modal
        confirmDeleteBtn.addEventListener('click', function () {
            if (turmaIdToDelete) {
                // Cria um formul√°rio dinamicamente e o submete (equivalente ao POST)
                const form = document.createElement('form');
                form.method = 'POST';
                form.action = `/turmas/excluir/${turmaIdToDelete}`;

            
                document.body.appendChild(form);
                form.submit();
            }
            closeModal();
        });

        // Fechar o modal ao clicar fora dele
        window.addEventListener('click', function (event) {
            if (event.target === deleteModal) {
                closeModal();
            }
        });


        // Fun√ß√£o para sair do sistema

        function logout() {
            // Pede confirma√ß√£o ao usu√°rio antes de redirecionar
            if (confirm('Deseja realmente sair do sistema?')) {

                window.location.href = '/login/sair';
            }
        }
        // Fun√ß√£o para navegar para outras p√°ginas (usada em vers√µes anteriores, mas mantida)
        function navegarPara(pagina) {
            const rotas = {

                'inicio': '/home',
                'cadastro': '/acessar-aluno',

                'matricula': '/matriculas',

                'professor': '/professores',
                'turmas': '/turmas',
                'financeiro': '/financeiro'

            };
            if (rotas[pagina]) {
                window.location.href = rotas[pagina];
            }
        }

        // Executa o c√≥digo JavaScript depois que todo o HTML da p√°gina foi carregado
        document.addEventListener('DOMContentLoaded', function () {
            const profileToggle = document.getElementById('profile-toggle');

            const dropdownMenu = document.getElementById('profile-dropdown-menu');
            const profileArrow = profileToggle.querySelector('.profile-arrow');

            // Adiciona um evento de clique ao √≠cone do perfil para mostrar / esconder o dropdown
            profileToggle.addEventListener('click', function (event) {

                event.stopPropagation(); // Impede que o clique se propague para o 'window'
                dropdownMenu.classList.toggle('show'); // Adiciona ou remove a classe 'show'

                // Gira a seta para baixo ou para cima

                profileArrow.style.transform = dropdownMenu.classList.contains('show') ?
                    'rotate(180deg)' : 'rotate(0deg)';
            });

            // Adiciona um evento de clique na janela inteira para fechar o dropdown se ele estiver aberto
            window.addEventListener('click', function () {
                if (dropdownMenu.classList.contains('show')) {


                    dropdownMenu.classList.remove('show');
                    profileArrow.style.transform = 'rotate(0deg)';
                }

            });
            // --- L√≥gica da Barra de Pesquisa ---
            const searchInput = document.querySelector('.search-input');
            // Adiciona um evento que √© disparado toda vez que o usu√°rio digita algo
            searchInput.addEventListener('input', function () {
                const searchTerm = this.value.toLowerCase(); // Pega o texto e converte para min√∫sculas

                const rows = document.querySelectorAll('#turmasTableBody tr'); // Pega todas as linhas da tabela


                rows.forEach(row => {

                    // Verifica se a linha n√£o √© a mensagem "Nenhuma turma cadastrada"
                    if (row.children.length > 1) {

                        const rowText = row.textContent.toLowerCase();
                        // Pega todo o texto da linha

                        // Se o texto da linha incluir o termo pesquisado, mostra a linha. Sen√£o, esconde.
                        row.style.display = rowText.includes(searchTerm) ?
                            '' : 'none';
                    }

                });
            });
        });


        // Esse c√≥digo verifica se a p√°gina foi aberta pelo bot√£o "Voltar" do navegador
        window.addEventListener("pageshow", function (event) {
            var historyTraversal = event.persisted ||
                (typeof window.performance != "undefined" &&

                    window.performance.navigation.type === 2);
            if (historyTraversal) {
                // Se for um "Voltar", for√ßa o navegador a recarregar a p√°gina
                window.location.reload();
            }
        });
    </script>
</body>

</html>