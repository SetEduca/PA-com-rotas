<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Seteeduca - Cadastro de Criança</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Allerta&family=Kodchasan:wght@400;500;700&display=swap" rel="stylesheet" />
  <style>
    body { 
        font-family: 'Kodchasan', sans-serif; 
        background-color: #FFF4DF;
         min-height: 100vh; 
        }
    .logo-container { 
        display: flex; 
        justify-content: flex-end; 
        margin-top: 15px;
         padding-right: 15px;
         }
    .logo { 
        width: 90px; 
        height: auto; 
        top: -15px; 
        position: relative;
     }
    header {
         background-color: #00A6FF; 
         border-radius: 0 0 40px 40px;
          padding: 10px 20px; 
          height: 40px; 
          margin-top: -15px; 
          display: flex;
           align-items: center; 
           justify-content: center; 
           box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
    .header-title { 
        display: flex; 
        align-items: center; 
        gap: 10px; 
        font-size: 1.5rem; 
        color: black; 
        font-family: 'Kodchasan', sans-serif;
     }
    .header-title b { 
        font-family: 'Allerta', sans-serif; 
    }
    .header-title svg { 
        width: 35px; 
        height: 35px;
     }
    .caixa { 
        width: 95%; 
        max-width: 1000px; 
        background: #fff; 
        border-radius: 20px; 
        padding: 30px; 
        margin: 30px auto; 
        border-left: 5px solid #00A6FF;
    
    }
    .form-row { 
        display: flex; 
        flex-wrap: wrap; 
        gap: 15px; 
    }
    .form-group { 
        display: flex; 
        flex-direction: column; 
        gap: 6px; 
        flex: 1;
     }
    input, select { 
        padding: 12px; 
        border: 2px solid #00A6FF; 
        border-radius: 12px; 
        background: #fff9f0;
     }
    input:focus, select:focus {
         border-color: #007ACC;
          outline: none;
           box-shadow: 0 0 0 3px rgba(0,166,255,0.2); 
        }
    .btn-custom {
         padding: 12px 24px;
          border-radius: 10px; 
          margin: 10px;
          font-weight: bold; 
          cursor: pointer; 
        }
    .btn-primary {
         background: #00A6FF;
          color: #fff;
         }
    .btn-secondary { 
        background: #ccc; 
        color: #333;
     }
    .text-center {
         text-align: center;
         }
  </style>
</head>
<body>
  <!-- LOGO -->
  <div class="logo-container"><img class="logo" src="/imagem/financeiro/logocomp.png" alt="Logo" /></div>

  <!-- HEADER ORIGINAL -->
  <header>
    <div class="header-title">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 76 76">
        <circle cx="38" cy="38" r="28" stroke="black" stroke-width="4.75"/>
        <circle cx="38" cy="36" r="12" stroke="black" stroke-width="4.75"/>
        <path d="M18.9 59.2c1.8-3.5 4.5-6.5 7.9-8.6s7.2-3.1 11.2-3.1c4 0 7.9 1.1 11.2 3.1s6.1 5.1 7.9 8.6" stroke="black" stroke-width="4.75"/>
      </svg>
      <span>Cadastro de <b>Criança</b></span>
    </div>
  </header>

  <!-- FORM -->
  <div class="caixa">
    <form id="formCadastroCrianca">
      <div class="form-row">
        <div class="form-group"><label for="nome">Nome:</label><input type="text" id="nome" required></div>
        <div class="form-group"><label for="cpf">CPF:</label><input type="text" id="cpf"></div>
        <div class="form-group"><label for="data">Data Nasc:</label><input type="date" id="data"></div>
      </div>
      <div class="form-group"><label for="sexo">Sexo:</label>
        <select id="sexo"><option disabled selected>Selecione</option><option>Feminino</option><option>Masculino</option></select>
      </div>
      <div class="form-group"><label for="telefone">Telefone:</label><input type="text" id="telefone"></div>
      <div class="form-row">
        <div class="form-group"><label for="endereco">Endereço:</label><input type="text" id="endereco"></div>
        <div class="form-group"><label for="numero">Número:</label><input type="text" id="numero"></div>
        <div class="form-group"><label for="complemento">Complemento:</label><input type="text" id="complemento"></div>
      </div>
      <div class="form-row">
        <div class="form-group"><label for="naturalidade">Naturalidade:</label><input type="text" id="naturalidade"></div>
        <div class="form-group"><label for="estado">Estado:</label><input type="text" id="estado"></div>
        <div class="form-group"><label for="turma">Turma:</label><input type="text" id="turma"></div>
      </div>
      <div class="form-group"><label for="corRaca">Cor/Raça:</label>
        <select id="corRaca"><option disabled selected>Selecione</option><option>Branca</option><option>Preta</option><option>Parda</option><option>Indígena</option><option>Amarela</option><option>Não declarada</option></select>
      </div>
      <div class="form-group"><label for="alergias">Alergias:</label><input type="text" id="alergias"></div>
      <div class="form-group"><label for="deficiencias">Deficiências / Transtornos:</label><input type="text" id="deficiencias"></div>
      <div class="form-group"><label for="foto">Foto da Criança:</label><input type="file" id="foto" accept="image/*"></div>
      <div class="text-center">
        <button type="button" class="btn-custom btn-primary" onclick="finalizarCadastro()">Finalizar Cadastro</button>
        <button type="button" class="btn-custom btn-secondary" onclick="cadastrarOutra()">Cadastrar Outra Criança</button>
      </div>
    </form>
  </div>

  <script>
    function getBase64(file, callback) {
      const reader = new FileReader();
      reader.onload = () => callback(reader.result);
      reader.readAsDataURL(file);
    }
    function salvarCrianca(callback) {
      const responsavel = JSON.parse(localStorage.getItem('responsavelAtual')) || {};
      const criancas = JSON.parse(localStorage.getItem('criancas')) || [];
      const file = document.getElementById('foto').files[0];
      const childData = {
        nome: nome.value, cpf: cpf.value, data: data.value, sexo: sexo.value,
        telefone: telefone.value, endereco: endereco.value, numero: numero.value,
        complemento: complemento.value, naturalidade: naturalidade.value, estado: estado.value,
        turma: turma.value, corRaca: corRaca.value, alergias: alergias.value,
        deficiencias: deficiencias.value, responsavel: responsavel.nome,
        responsavelDados: responsavel
      };
      if (file) {
        getBase64(file, (img) => { childData.foto = img; criancas.push(childData); localStorage.setItem('criancas', JSON.stringify(criancas)); callback(); });
      } else {
        childData.foto = "";
        criancas.push(childData);
        localStorage.setItem('criancas', JSON.stringify(criancas));
        callback();
      }
    }
    function finalizarCadastro() { salvarCrianca(() => window.location.href = 'cria.ejs'); }
    function cadastrarOutra() { salvarCrianca(() => window.location.href = 'cadastro2.ejs'); }
  </script>
</body>
</html>
